diff -aur sqlite-autoconf-3071600/shell.c sqlite/shell.c
--- sqlite-autoconf-3071600/shell.c	2013-03-18 20:01:49.000000000 +0400
+++ sqlite/shell.c	2014-04-08 12:36:51.613781903 +0400
@@ -486,9 +486,9 @@
 */
 static void shellLog(void *pArg, int iErrCode, const char *zMsg){
   struct callback_data *p = (struct callback_data*)pArg;
-  if( p->pLog==0 ) return;
-  fprintf(p->pLog, "(%d) %s\n", iErrCode, zMsg);
-  fflush(p->pLog);
+  //if( p->pLog==0 ) return;
+  printf(">>> sqlite log: (%d) %s\n", iErrCode, zMsg);
+  //fflush(p->pLog);
 }
 
 /*
@@ -2781,6 +2781,8 @@
   /* Windows CE (arm-wince-mingw32ce-gcc) does not provide getenv()
    */
   home_dir = "/";
+#elif defined(__EMBOX__)
+  home_dir = "/tmp";
 #else
 
 #if defined(_WIN32) || defined(WIN32)
diff -aur sqlite-autoconf-3071600/sqlite3.c sqlite/sqlite3.c
--- sqlite-autoconf-3071600/sqlite3.c	2013-03-18 20:01:49.000000000 +0400
+++ sqlite/sqlite3.c	2014-04-08 12:38:28.235995775 +0400
@@ -562,6 +562,8 @@
 #if defined(__GNUC__) && 0
 # define likely(X)    __builtin_expect((X),1)
 # define unlikely(X)  __builtin_expect((X),0)
+#elif defined(__EMBOX__)
+#include <linux/compiler.h>
 #else
 # define likely(X)    !!(X)
 # define unlikely(X)  !!(X)
@@ -23023,6 +23025,8 @@
 # endif
   int sqlite3OSTrace = SQLITE_DEBUG_OS_TRACE;
 # define OSTRACE(X)          if( sqlite3OSTrace ) sqlite3DebugPrintf X
+#elif defined(__EMBOX__)
+# define OSTRACE(X)          sqlite3DebugPrintf X
 #else
 # define OSTRACE(X)
 #endif
@@ -23508,7 +23512,7 @@
 #endif
 
 
-#if defined(SQLITE_TEST) && defined(SQLITE_DEBUG)
+#if defined(__EMBOX__) || defined(SQLITE_TEST) && defined(SQLITE_DEBUG)
 /*
 ** Helper function for printing out trace information from debugging
 ** binaries. This returns the string represetation of the supplied
@@ -37479,7 +37483,7 @@
 /*
 ** Macros for troubleshooting.  Normally turned off
 */
-#if 0
+#if 1
 int sqlite3PagerTrace=1;  /* True to enable tracing */
 #define sqlite3DebugPrintf printf
 #define PAGERTRACE(X)     if( sqlite3PagerTrace ){ sqlite3DebugPrintf X; }
