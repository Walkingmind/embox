#summary Describing Shell's goals and plans

= Introduction =

Было решено что следует начать с малого. В начале следует написать наиболее простой терминал, а затем начать воздвигать на этом фундаменте более совершенный терминал. Предпологается что здесь будет вестить некоторые слепки эволюции.

= Этап I: Начало времен =

Поставлены следующие задачи на текущий момент:
 # Оболочка (shell)
    Можно делать стандартные printf() и scanf(). Эти процедуры будут использовать устройство tty - read() и write(). r\w принцимают в качестве параметра строки
 # Терминал (tty)
    Реализует отправку строк устройству serial, принимает на вход поток байт и формирует из них строку, которую затем отадет наверх через read(); т.е. читаем байты, прогоняем через парсеры, пишем в отедльный буфер. Так же должна делать echo-вывод. 
 # Последовтельное устройство (serial) 
    Разбивает строку на токены(иначе говоря - отдельный символы) и отправляет их в устройство. Т.е. разбиваем на токены, прогоняем через парсер, скармливаем write() физ. устройства. 
{{{
1.Оболочка
   scanf  >> строка >> read  --------+
   printf << строка << write -----+  |
                                  |  |
2.Терминал                      <-+  |
   1. echo                      <----+
   2. приходит и уходит то что на экране
   3. разгребает поток байт
3. Последовательное устройство
   * putchar() 
                --- блокирующие
   * getchar()  
Поясняющая картинка к устройству ввода\вывода
}}}
 # Машина состояний (то есть пасрер) 
    Выдрать и приспособить
{{{
serial <-----> парсер <---------> буфер
Общее предстваление работы getchar()
Примечание: putchar() анологично 
}}}
 # Файловая система
    Нужна что бы сделать связть фс с подсистемой драйверов
 # Связь файловой системы с драйверами
    Собственно.


{{{    
               поток байт
                   <--------------+  +-------> ф. устройство
shell <--------> tty            serial             
       строка      +-------------->  +---------->   ф. устройство
                      строка           
Общая схема
}}}

Реализовать эту простейшую схему следует в две недели. 