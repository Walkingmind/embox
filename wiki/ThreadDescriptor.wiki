#summary Описатель задачи.

==Описатель задачи==
Когда говорится о вытесняющем планировании, то вводится специфичный термин определения задачи как единицы планирования - поток. Поток - это последовательность инструкций, выполняющихся на процессорном ядре. 
Каждый поток обладает следующими параметрами:
  * контекст процессора
  * текущее состояние
  * атрибуты планирования
  * адрес функции исполнения и ее параметры
  * описание задачи потока
  * уникальный идентификатор потока

===Контекст процессора===
Отличительной чертой потока является наличие контекста процессора (или просто контекста). Контекст - состояния  процессора во время исполнения, то есть значение его регистров.

Во время прерывания потока планировщику необходимо сохранить контекст процессора, и при возобновлении работы потока он загружает контекст в CPU, тем самым возвращая его в состояние, в котором поток был прерван. Сохранение текущего контекста и загрузка нового называется переключением контекста.

===Состояние потока===
Состояние потока используется планировщиком в процессе своей работы (см. раздел “Машина состояний потока”). Состояние потока - это комбинация из значений полей active, waiting, ready.

===Ресурсы потока===
Поток представляет из себя объект операционной системы, под него должна быть выделена память. Память выделяется под стек, на котором будут располагаться автоматические переменные, и под структуры, которые описывают поток. Освобождением ресурсов также можно управлять (см. раздел “Управление ресурсами потока”). С точки зрения управления ресурсов поток может находиться  в следующих состояниях: Joinable, Joined, Detached.

===Атрибуты планирования===
Атрибуты планирования - это данные, характеризующие конкретную стратегию планирования в структуре потока. Они обладают следующими параметрами:
  * ссылка в очереди потоков (далее Линк потока)
  * время исполнения потока
  * приоритет потока
  * и др.

Линк потока является идентификатором потока в очереди готовых потоков планировщика и основным полем атрибутов планирования. Именно по нему обеспечивается поиск следующего потока, которому предоставят время процессора. Все остальные поля содержат вспомогательную информацию, которая может учитываться при планировании. Линк потока может быть описан разными структурами (списками, приоритетными очередями, массивами). Подробнее (см раздел “Работа стратегии планирования”).

===Адрес функции исполнения и ее параметры===
Для описания прикладной задачи необходимо наличие интерфейса, который позволит программисту передать потоку информацию о пользовательской функции которая решает поставленную задачу, а также параметры для ее корректного исполнения. Для этих целей служат поля, содержащие адрес рабочей функции, набор задаваемых пользователем параметров, которые в нее передают, и результаты выполнения задач. Результаты выполнения можно хранить в том же месте, что и переданные параметры, поскольку по завершении функции параметры, переданные для потока уже не нужны.

===Описание задачи потока===
В описателе каждого потока хранится ссылка на задачу, который он принадлежит, что позволяет быстро обращаться к задаче. Это может понадобиться, например, для поддержки сложного приоритета, когда на приоритет выполнения потока в планировщике влияет не только приоритет потока, но и приоритет задачи.

Кроме того, структура потока содержит линк потока в очереди потоков задачи. Он необходим, чтобы зарегистрировать поток в системе, обратиться к другим потокам задачи и т.д.

===Уникальный идентификатор потока===
Каждому потоку в системе присваивается уникальный идентификатор (id), по которому можно отличить поток от другого потока в системе и получить описатель потока. Это полезно, когда необходимо воздействовать на поток, имея только id этого потока.

Таким образом описатель потока можно представить следующим образом:

http://embox.googlecode.com/svn/wiki/images/Scheduler/ThreadDescriptor.png
