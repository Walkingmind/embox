#summary Потоки Boot и Idle.

=Потоки Boot и Idle=
Для корректной работы вытесняющего планировщика в системе требуется наличие специальных потоков: 
  * Idle - всегда присутствует в очереди планирования
  * boot - запускает планировщик
==Idle==
Этот поток всегда присутствует в очереди готовых потоков. Он имеет минимальный приоритет, и, следовательно, планировщик предоставляет ему время, когда все остальные потоки в системе ожидают какого-либо события.
Поток idle упрощает проверку во время выбора очередного потока и может быть использован для управления пониженным потреблением в системе.
Поток idle обязательно создается с флагами THREAD_FLAG_SUSPENDED и THREAD_FLAG_NO_TASK (см. раздел Создание потока), привязывается поток к задаче kernel_task (см. раздел Регистрация потока), ему устанавливается минимальный приоритет. Планировщик запускает idle в процессе инициализации своего окружения. 
==Boot==
Поток boot, по сути дела, оборачивает код, который выполнялся до запуска планировщика, и представляет его в форме дескриптора потока, при этом сохраняется структура стека, и продолжается выполнение кода, из которого он был загружен. И уже позже, когда запустится планировщик, синтезированный поток может быть прерван другими потоками с большим или равным приоритетом. То есть планировщик будет относиться к данному потоку как к обычному потоку в своей очереди планирования.

Поскольку загрузочный поток обладает специальными свойствами, он не может быть создан с помощью функции thread_create(). Код, который создает данный поток, самостоятельно должен выделить место под дескриптор потока. При этом память под стек выделять не нужно, ведь он сохраняет стек в нетронутом виде.
