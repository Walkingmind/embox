#summary HAL description, interface

HAL является уровнем абстаркции, представляющий единый интерфейс для аппаратного 
обеспечения всех платформ, что
позволяет писать ядро платформо-независимо, на языке программирования высокого 
уровня. В HAL также входят абстракции основных системных устройств, таких как
часы, контроллер прерываний.

http://embox.googlecode.com/svn/wiki/images/Hal/hal.png

== Загрузчный код == 

Во время старта превым выполняется полностью
архитектурно-зависимый загрузочный код, чтобы обеспечить
первоначальную инициализацию необходимого оборудования.
Он переводит процессор в известный режим, 
копирует в оперативную память необходимые секции ядра, 
передает управление функции инициализации ядра.

== Режимы процессора ==

Ядру требуется управлять режимом работы процессора, такими как переключение 
в пользовательский режим, управлением кэшем данных и инструкций процессора,
и так далее.
HAL абстрагирует режимы процессора, предоставляя интерфейс для доступа 
к слову состояния
процессора, разрешению на прерывания, управление кэшем.

== Таблица прерывания ==

Как правило, [Traps прерывания] нумеруются, а адрес обработчика прерываний
записан в специальную таблицу прерываний по смещению, соответствующему 
номеру прерывания.
Ядру и драйверам требуется устанавливать собственные обработчики прерываний для 
некоторых прерываний, таких как такт системных часов, деление на ноль, и так далее. 
HAL предоставляет интерфейс для управления системной таблицей прерываний, 
функций получения и установки обработчиков, первичные обработчики прерываний.

== Атомарные операции ==

Во время разработки критических секций может возникнуть необходимость требовать, 
что данный участок программы не будет прерван и не будет начата обработка
какого-либо прерывания.
HAL предоставляет платформо-независимый механизм, с использованием которого
создавать такого рода секции.

== Контекст выполнения (процессора) == 

Контекст это тип, представляющий полное описание состояния процессора. 
HAL позволяет сохранить и восстановить, переключить контекст.
Контекст используется для переключения нити или процеcса, возврату к сохранённому 
ранее состоянию процессора.
Высокоуровневый [механизим] определяет, когда следует соврешить переключение,
и выполняет это посредством HAL.

== Виртуальная память ==
Для предоставлении процессу линейного, изолированного от других процессов адресного 
пространства, ядро использует механизм 
[VirtualMemory виртуальной памяти].
HAL предоставляет интерфейс для аппартного контроллера памяти (MMU), предоставляющего
высокопроизводительную поддержку виртуальной памяти на уровне процессора (чтение/запись
по виртуальным адресам).
Интерфейс позволяет включить или отключить виртуальную память, создать
отображение физческой памяти на виртуальную.

== Системные устройства == 
=== Часы === 

Часы являются устройством, генерирующим прерывания через определённый равный
промежуток времени. Такт часов используется для вычисления относительного 
времени (время со старта системы), как сигнал для диспетчеризации таймеров,
переключения активного потока исполнения на более приоритетный. 
HAL предоставляет интрефейс часов, позволяющий провести инициализацию часов,
настроить период прерываний.

=== Контроллер прерываний ===

Система зачастую имеет несколько возможных источников аппаратных
[Traps прерываний]. Для простоты использутся особый контроллер, независимо
разрешающий или запрещающий те или иные источники.
HAL включает интерфейс контроллера, предоставляющий возможность независио
включить/выключить генерацию прерывания аппаратным прерыванием, получение 
источника аппаратного прерывания для обработчика прерываний.
