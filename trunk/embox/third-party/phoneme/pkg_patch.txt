diff -uar ../../../../../download/phoneme/cldc/build/share/jvm.make phoneme/cldc/build/share/jvm.make
--- ../../../../../download/phoneme/cldc/build/share/jvm.make	2014-02-04 18:37:41.000000000 +0400
+++ phoneme/cldc/build/share/jvm.make	2014-08-04 17:25:06.107448347 +0400
@@ -1879,6 +1879,8 @@
 
 LIB_FLAGS          = cqs
 
+ASM_FLAGS          = --32
+
 ifeq ($(os), darwin)
  # darwin is picky on the lib manager
  LIBMGR_gcc        = libtool
@@ -2034,7 +2036,7 @@
 LINK_FLAGS             += -lm
 endif
 
-LINK_FLAGS             += $(LINK_OPT_FLAGS_$(BUILD))
+LINK_FLAGS             += $(LINK_OPT_FLAGS_$(BUILD)) -m32
 
 ifeq ("$(ENABLE_STATIC_LINK)-$(IsTarget)", "true-true")
 LINK_FLAGS             += -static
@@ -2066,10 +2068,22 @@
 	$(A)$(ASM) $(ASM_FLAGS) -o $@ $(THIS_DIR)/AsmStubs_$(target_arch).s
 endif
 
+ifeq ($(IsLoopGen), true)
+define BUILD_C_TARGET
+	$(A)echo " ... [LoopGen] $(notdir $<)"
+	$(A)$(CPP) $(CPP_OPT_FLAGS) $(CPP_FLAGS) $(THUMB_CFLAGS) -fpermissive -m32 -c $< -o $@
+endef
+else ifeq ($(IsRomGen), true)
 define BUILD_C_TARGET
-	$(A)echo " ... $(notdir $<)"
-	$(A)$(CPP) $(CPP_OPT_FLAGS) $(CPP_FLAGS) $(THUMB_CFLAGS) -c $< -o $@
+	$(A)echo " ... [RomGen] $(notdir $<)"
+	$(A)$(CPP) $(CPP_OPT_FLAGS) $(CPP_FLAGS) $(THUMB_CFLAGS) -fpermissive -m32 -c $< -o $@
 endef
+else
+define BUILD_C_TARGET
+	$(A)echo " ... [TARGET] $(notdir $<)"
+	$(EMBOX_GXX) $(CPP_OPT_FLAGS) $(CPP_FLAGS) $(THUMB_CFLAGS) -DSUPPORTS_ADJUSTABLE_MEMORY_CHUNK=0 -fpermissive -Wno-error -c $< -o $@
+endef
+endif
 
 ifeq ($(ENABLE_THUMB_VM)+$(IsTarget), true+true)
 %$(OBJ_SUFFIX): $(WorkSpace)/src/vm/os/linux/%.cpp
diff -uar ../../../../../download/phoneme/cldc/src/vm/cpu/i386/kni_md.h phoneme/cldc/src/vm/cpu/i386/kni_md.h
--- ../../../../../download/phoneme/cldc/src/vm/cpu/i386/kni_md.h	2014-02-04 18:36:47.000000000 +0400
+++ phoneme/cldc/src/vm/cpu/i386/kni_md.h	2014-08-04 17:14:31.501692868 +0400
@@ -36,7 +36,7 @@
 typedef signed char jbyte;
 typedef int         jint;
 
-#ifndef LINUX
+#if !(defined LINUX) && !(defined __EMBOX__)
 typedef __int64     jlong;
 #else
 typedef long long jlong;
diff -uar ../../../../../download/phoneme/javacall/interface/javacall_defs.h phoneme/javacall/interface/javacall_defs.h
--- ../../../../../download/phoneme/javacall/interface/javacall_defs.h	2014-02-04 18:37:02.000000000 +0400
+++ phoneme/javacall/interface/javacall_defs.h	2014-08-04 17:14:31.501692868 +0400
@@ -260,11 +260,11 @@
  * @typedef javacall_pixel
  * @brief Pixel type for LCD graphics
  */
-#if ENABLE_DYNAMIC_PIXEL_FORMAT
+#if defined(ENABLE_DYNAMIC_PIXEL_FORMAT) && ENABLE_DYNAMIC_PIXEL_FORMAT
 typedef unsigned short javacall_pixel16;
 typedef unsigned int javacall_pixel32;
 typedef javacall_pixel32 javacall_pixel;
-#elif ENABLE_32BITS_PIXEL_FORMAT
+#elif defined(ENABLE_32BITS_PIXEL_FORMAT) && ENABLE_32BITS_PIXEL_FORMAT
 typedef unsigned int javacall_pixel;
 #else
 typedef unsigned short javacall_pixel;
diff -uar ../../../../../download/phoneme/pcsl/makefiles/share/gcc.gmk phoneme/pcsl/makefiles/share/gcc.gmk
--- ../../../../../download/phoneme/pcsl/makefiles/share/gcc.gmk	2014-02-04 18:36:57.000000000 +0400
+++ phoneme/pcsl/makefiles/share/gcc.gmk	2014-08-04 17:14:31.501692868 +0400
@@ -42,10 +42,10 @@
 
 GCC_VERSION	=
 
-CC		= $(GNU_TOOLS_BINDIR)gcc$(GCC_VERSION)
+CC		:= $(CC)
 CPP		= $(GNU_TOOLS_BINDIR)g++$(GCC_VERSION)
 LD		= $(GNU_TOOLS_BINDIR)g++$(GCC_VERSION)
-AR		= $(GNU_TOOLS_BINDIR)ar -rc
+AR		:= $(CROSS_COMPILE)ar -rc
 
 CC_OUTPUT=-o 
 AR_OUTPUT=
