package third_party.cmd

@App
@Build(script="$(EXTERNAL_MAKE)")
@Cmd(name = "lua",
	help = "Lua interpreter",
	man = '''
		NAME
			lua - Lua interpreter
		SYNOPSIS
			lua [script]
		AUTHORS
			Nikolay Korotkiy, Ilia Vaprol - Adaptation for Embox
	''')
module lua {
	@AddPrefix("^BUILD/extbld/^MOD_PATH/install")
	@Rule(script="$(EXTERNAL_MAKE) -f $(abspath $(ROOT_DIR))/mk/main-stripping.mk TARGET_APP='$(module_id)' FILE_APP='$(abspath $@)'")
	source "strip.lua.o"

	@InitFS
	source "fib.lua",
		"tofi.lua",
		"tofi_mod.lua",
		"doit.lua"

	depends embox.mem.heap_api
	@NoRuntime depends embox.compat.libc.LibC
	@NoRuntime depends embox.kernel.task.resource.errno
}
