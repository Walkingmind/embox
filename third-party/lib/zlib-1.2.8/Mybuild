package third_party.zlib

module libs {
	depends embox.lib.LibC
	
	depends embox.arch.x86.LibM // FIXME:
	
	source "empty.c" // FIXME: workaround

	@Rule(script="$(MAKE) -C $(THIRDPARTY_DIR)/lib/zlib-1.2.8 MAKEFLAGS= EMBOX_MAKEFLAGS='$(MAKEFLAGS)' ROOT_DIR=$(abspath $(ROOT_DIR)) EMBOX_CFLAGS='$(CFLAGS)' EMBOX_CXXFLAGS='$(CXXFLAGS)' EMBOX_CPPFLAGS='$(EMBOX_EXPORT_CPPFLAGS)'")
	source "../../../../../../third-party/lib/zlib-1.2.8/libz.a"
}


@Cmd(name = "gzip",
	help = "Compress or uncompress FILEs (by default, compress FILES in-place).",
	man = '''
		NAME
			gzip - Compress or uncompress FILEs .
		SYNOPSIS
			gzip [OPTION]... [FILE]...
		AUTHORS
			Andrey Gazukin
	''')
module gzip {
	depends libs
	
	@Rule(script="true")
	source "../../../../../../third-party/lib/zlib-1.2.8/minigzip.o"
	source "minigzip_cmd.c"
	source "order.mk"
}