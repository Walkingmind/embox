package third_party.cmd

@App
@Cmd(name = "lua",
	help = "Lua interpreter",
	man = '''
		NAME
			lua - Lua interpreter
		SYNOPSIS
			lua [script]
		AUTHORS
			Nikolay Korotkiy - Adaptation for Embox
	''')
module lua {
	@Rule(script="$(CC) $(flags_before) $(CFLAGS) $(CPPFLAGS) $(flags) -DLUA_COMPAT_ALL -DLUA_USE_POSIX -c -o $@ $(mk_file:$(MKGEN_DIR)/%.rule.mk=%)")
	source
		"lapi.c", "lauxlib.c", "lbaselib.c", "lbitlib.c", "lcode.c",
		"lcorolib.c", "lctype.c", "ldblib.c", "ldebug.c", "ldo.c", "ldump.c",
		"lfunc.c", "lgc.c", "linit.c", "liolib.c", "llex.c", "lmathlib.c",
		"lmem.c", "loadlib.c", "lobject.c", "lopcodes.c", "loslib.c",
		"lparser.c", "lstate.c", "lstring.c", "lstrlib.c", "ltable.c",
		"ltablib.c", "ltm.c", "lua.c", /*"luac.c",*/ "lundump.c", "lvm.c", "lzio.c"

	source "lua_embox_compat.c"

	@InitFS
	source "doit.lua", "fib.lua", "tofi.lua"

	depends embox.mem.heap_api
	@NoRuntime depends embox.compat.libc.LibC
	@NoRuntime depends embox.framework.cmd
	@NoRuntime depends third_party.lib.Fdlibm
}
